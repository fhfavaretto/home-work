/* INSERE NOVOS VALORES NA TABELA DE AMARRAÇÃO */
Insert into AFR010 (AFR_FILIAL,AFR_PROJET,AFR_TAREFA,AFR_TIPOD,AFR_PREFIX,AFR_NUM,AFR_PARCEL,AFR_TIPO,AFR_FORNEC,AFR_LOJA,AFR_VALOR1,AFR_VALOR2,AFR_VALOR3,AFR_VALOR4,AFR_VALOR5,AFR_REVISA,AFR_DATA,AFR_VENREA,AFR_ID,AFR_VIAINT,D_E_L_E_T_,R_E_C_N_O_,AFR_X_OBSI,AFR_X_OBSA) values ('11001','000008',' ','      ','A','000040507','  ','TX','UNIAO','00',0,'0','0','0','0','0005','20180219','20180219',(SELECT MAX(AFR_ID)+1 FROM AFR010),' ',' ',(SELECT MAX(R_E_C_N_O_)+1 FROM AFR010),'AMARRAÇÃO MANUAL 19/02/2018 - CAIRÊ VIEIRA',' ');
Insert into AFR010 (AFR_FILIAL,AFR_PROJET,AFR_TAREFA,AFR_TIPOD,AFR_PREFIX,AFR_NUM,AFR_PARCEL,AFR_TIPO,AFR_FORNEC,AFR_LOJA,AFR_VALOR1,AFR_VALOR2,AFR_VALOR3,AFR_VALOR4,AFR_VALOR5,AFR_REVISA,AFR_DATA,AFR_VENREA,AFR_ID,AFR_VIAINT,D_E_L_E_T_,R_E_C_N_O_,AFR_X_OBSI,AFR_X_OBSA) values ('11001','000008',' ','      ','A','000000253','  ','TX','UNIAO','00',0,'0','0','0','0','0005','20180209','20180209',(SELECT MAX(AFR_ID)+1 FROM AFR010),' ',' ',(SELECT MAX(R_E_C_N_O_)+1 FROM AFR010),'AMARRAÇÃO MANUAL 19/02/2018 - CAIRÊ VIEIRA',' ');
Insert into AFR010 (AFR_FILIAL,AFR_PROJET,AFR_TAREFA,AFR_TIPOD,AFR_PREFIX,AFR_NUM,AFR_PARCEL,AFR_TIPO,AFR_FORNEC,AFR_LOJA,AFR_VALOR1,AFR_VALOR2,AFR_VALOR3,AFR_VALOR4,AFR_VALOR5,AFR_REVISA,AFR_DATA,AFR_VENREA,AFR_ID,AFR_VIAINT,D_E_L_E_T_,R_E_C_N_O_,AFR_X_OBSI,AFR_X_OBSA) values ('11001','000008',' ','      ','A','000049496','  ','TX','UNIAO','00',0,'0','0','0','0','0005','20180209','20180209',(SELECT MAX(AFR_ID)+1 FROM AFR010),' ',' ',(SELECT MAX(R_E_C_N_O_)+1 FROM AFR010),'AMARRAÇÃO MANUAL 19/02/2018 - CAIRÊ VIEIRA',' ');
Insert into AFR010 (AFR_FILIAL,AFR_PROJET,AFR_TAREFA,AFR_TIPOD,AFR_PREFIX,AFR_NUM,AFR_PARCEL,AFR_TIPO,AFR_FORNEC,AFR_LOJA,AFR_VALOR1,AFR_VALOR2,AFR_VALOR3,AFR_VALOR4,AFR_VALOR5,AFR_REVISA,AFR_DATA,AFR_VENREA,AFR_ID,AFR_VIAINT,D_E_L_E_T_,R_E_C_N_O_,AFR_X_OBSI,AFR_X_OBSA) values ('11034','000006','02.02','      ','A','000040156','  ','NF','019218','01',0,'0','0','0','0','0005','20180110','20180110',(SELECT MAX(AFR_ID)+1 FROM AFR010),' ',' ',(SELECT MAX(R_E_C_N_O_)+1 FROM AFR010),'AMARRAÇÃO MANUAL 12/01/2018 - CAIRÊ VIEIRA',' ');

SELECT * FROM AFR010 WHERE D_E_L_E_T_=' ' AND AFR_NUM = '000030654' ORDER BY R_E_C_N_O_ DESC;

/* PREENCHE CAMPOS QUE FALTARAM */
SELECT * FROM AFR010 WHERE D_E_L_E_T_=' ' ORDER BY R_E_C_N_O_ DESC;
UPDATE AFR010 SET AFR_PROJET = '000007' WHERE R_E_C_N_O_ IN (15691);

/* PREENCHE CAMPOS DE PMS NO TITULO SE2 */
SELECT * FROM SE2010 WHERE E2_FILIAL = '11034' AND E2_VALOR in (6213.22,3984.13,1120) AND D_E_L_E_T_=' ' ;
UPDATE SE2010 SET E2_X_CPMS = '000002    ',E2_X_DPMS = 'CONVENIO 592/2016- LAR NOSSA SENHOR' WHERE E2_FILIAL = '11040' AND E2_NUM = '000003972' AND D_E_L_E_T_=' ' ;

/* VERIFICA OS PROJETOS E TAREFAS DISPONIVEIS */
SELECT * FROM AF9010 WHERE AF9_FILIAL = '11034' AND D_E_L_E_T_= ' ' AND AF9_PROJET = '000006    ';
SELECT * FROM AF8010 WHERE AF8_FILIAL = '11034' AND D_E_L_E_T_= ' ' ORDER BY AF8_PROJET;

SELECT * FROM SE2010 WHERE E2_NUM IN ('000003972') AND E2_FILIAL = '11040' AND D_E_L_E_T_=' ';

SELECT * FROM SE2010 WHERE E2_FILIAL||E2_PREFIXO||E2_NUM||E2_FORNECE||E2_LOJA||E2_TIPO 
IN (SELECT AFR_FILIAL||AFR_PREFIX||AFR_NUM||AFR_FORNEC||AFR_LOJA||AFR_TIPO FROM AFR010 WHERE AFR_PROJET <> ' ' AND AFR010.D_E_L_E_T_=' ');

UPDATE SE2010 SET E2_X_CPMS = (SELECT AFR_PROJET FROM AFR010 WHERE AFR_PROJET <> ' ' AND AFR010.D_E_L_E_T_=' ' AND AFR_FILIAL||AFR_PREFIX||AFR_NUM||AFR_FORNEC||AFR_LOJA||AFR_TIPO = E2_FILIAL||E2_PREFIXO||E2_NUM||E2_FORNECE||E2_LOJA||E2_TIPO )
WHERE E2_FILIAL||E2_PREFIXO||E2_NUM||E2_FORNECE||E2_LOJA||E2_TIPO 
IN (SELECT AFR_FILIAL||AFR_PREFIX||AFR_NUM||AFR_FORNEC||AFR_LOJA||AFR_TIPO FROM AFR010 WHERE AFR_PROJET <> ' ' AND AFR010.D_E_L_E_T_=' ') ;

SELECT * FROM SE2010 WHERE R_E_C_N_O_ IN (460984,476366,464310);
11001	A  	000040507	01	TX 	UNIAO 	00	20180103	20180220
11001	A  	000000253	02	TX 	UNIAO 	00	20180110	20180220
11001	A  	000049496	01	TX 	UNIAO 	00	20180131	20180220
